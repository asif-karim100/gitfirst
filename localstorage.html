<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js</title>
</head>
<style>
   
     .container {
         margin-top: 20px;
        border: 1px solid rgb(0, 255, 0);
        border-radius: 20px;
        padding: 2px;
        width: 500px;
       
        margin-inline: 300px;
        background-color:#f4f4f4;
        


    } 
</style>
<body>
    <section class="container " >
    <form id="myform" onsubmit='store(event)'>
        <h1>Add User</h1>
        <div class="msg"></div>
       
        <div class="form-group">
          <label for="name">Name:</label>
          <br>
          <input type="text"  id="name" >
        
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <br>
          <input type="email"id="email" >
        </div>
    
       
        <!-- <input class="btn" type="submit" value="submit"> -->
        <button>submit</button>
        <!-- </section> -->
        <!-- <ul id="listOfUser"></ul> -->
      </form>
      <!-- <ul id="listOfUser"></ul> -->

      </section>
      
     
       <ul id="user"></ul>
       

  
   
    

<script >
// const myform = document.querySelector('#myform');
// const nameinput = document.querySelector('#name');
// const emailinput = document.querySelector('#email');

// myform.addEventListener('submit',onsubmit);

// function onsubmit(e){
// e.preventDefault();

// const name = document.getElementById('name').value;

// const email = document.getElementById('email').value;

// // const ur = localStorage.setItem('name',name);
// // const em = localStorage.setItem('email',email);

// const obj = {
//   name,email
// }
// localStorage.setItem('userdetail',JSON.stringify(obj))

// //using email as unique key
// localStorage.setItem(obj.email,JSON.stringify(obj));
// showUserDetails(obj);
// }
// function showUserDetails(user){
//   const parentNode = document.getElementById('listOfUser');
//   const childHTML = `<li>${user.name} - ${user.email}</li>`
//   parentNode.innerHTML = parentNode.innerHTML+childHTML;
 
//    }


    myform.addEventListener('submit',onsubmit);

function onsubmit(e){
    e.preventDefault();


const name = document.getElementById('name').value;

const email = document.getElementById('email').value;

// // const ur = localStorage.setItem('name',name);
// // const em = localStorage.setItem('email',email);

const obj = {
  name,email
}

localStorage.setItem(obj.email,JSON.stringify(obj));
showNewUserOnScreen(obj);
}
window.addEventListener("DOMContentLoaded",()=>{
    const localstorageobj = localStorage;
    const localStorageKeys = Object.keys(localstorageobj);
    for(var i=0 ;i<localStorageKeys.length;i++){
        const key = localStorageKeys[i];
        const userDetailsString = localstorageobj[key];
        const userDetailsObj = JSON.parse(userDetailsString)
        showNewUserOnScreen(userDetailsObj)
    }
})
    function showNewUserOnScreen(user){
  const parentNode = document.getElementById('user');
  const childHTML = `<li> ${user.name} -- ${user.email}</li>`;
  parentNode.innerHTML =  parentNode.innerHTML+childHTML;
   }











    </script>
   

</body>

</html>
